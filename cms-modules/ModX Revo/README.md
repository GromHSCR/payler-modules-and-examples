Установка и настройка оплаты через Payler в ModX Revo

1. Скопировать папку core в каталог с сайтом (в итоге папка payler должна оказаться в core/components сайта)
2. Указать свой платежный ключ в файле core/components/payler/config.php (параметр key)
3. В панели управления открыть вкладку "Элементы", добавить категорию "payler", в нее добавить 2 сниппета "payler_pay", "payler_result".
4. Скопировать в эти сниппеты код из snippet/payler_pay.php и snippet/payler_result.php соответственно.
5. Вставить вызов обоих сниппетов, первый - в оплату (после выбора способа оплаты), второй - на страницу, на которую вернется пользователь после оплаты в шлюзе Payler (обратный URL можно установить в личном кабинете Payler)

Комментарии к сниппетам:
1. В payler_pay необходимо передавать 2 параметра - order_id (номер заказа) и amount (сумма оплаты, в копейках)
2. Сейчас в payler_result происходит проверка статуса оплаты заказа и возвращается текст, оплачен заказ или нет. Код смены статуса заказа в магазине добавьте после строки if (payler_status['status'] == 'Charged') {
3. Вызов payler_result должен быть некэшируемым (так как передается параметр в строке запроса). [[!payler_result]]

Все вопросы можете отправлять на 24@payler.com
